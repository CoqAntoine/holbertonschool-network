#!/usr/bin/env bash
# Configures /etc/hosts so localhost resolves to 127.0.0.2 and facebook.com resolves to 8.8.8.8

if [ "$EUID" -ne 0 ]; then
    echo "Please run as root"
    exit 1
fi

HOSTS_FILE="/etc/hosts"

grep -v "^.*localhost" "$HOSTS_FILE" | sudo tee /tmp/hosts.tmp >/dev/null
echo "127.0.0.2 localhost" | sudo tee -a /tmp/hosts.tmp >/dev/null

grep -v "^.*facebook.com" /tmp/hosts.tmp | sudo tee /tmp/hosts.tmp2 >/dev/null
echo "8.8.8.8 facebook.com" | sudo tee -a /tmp/hosts.tmp2 >/dev/null

sudo cp /tmp/hosts.tmp2 "$HOSTS_FILE"

echo "Hosts file updated successfully"
